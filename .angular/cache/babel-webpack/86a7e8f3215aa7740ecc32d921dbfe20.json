{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/store.service\";\nimport * as i2 from \"../files-upload-content/files-upload-content.component\";\n\nfunction FilesUploadComponent_p_fileUpload_0_ng_template_1_app_files_upload_content_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-files-upload-content\", 4);\n    i0.ɵɵlistener(\"onRemoveFileData\", function FilesUploadComponent_p_fileUpload_0_ng_template_1_app_files_upload_content_0_Template_app_files_upload_content_onRemoveFileData_0_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(3);\n      return ctx_r5.handleOnRemoveFileData($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const files_r4 = ctx.ngIf;\n    i0.ɵɵproperty(\"files\", files_r4);\n  }\n}\n\nfunction FilesUploadComponent_p_fileUpload_0_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, FilesUploadComponent_p_fileUpload_0_ng_template_1_app_files_upload_content_0_Template, 1, 1, \"app-files-upload-content\", 3);\n    i0.ɵɵpipe(1, \"async\");\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx_r2.files$));\n  }\n}\n\nfunction FilesUploadComponent_p_fileUpload_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-fileUpload\", 1);\n    i0.ɵɵlistener(\"onSelect\", function FilesUploadComponent_p_fileUpload_0_Template_p_fileUpload_onSelect_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.handleOnSelect($event);\n    });\n    i0.ɵɵtemplate(1, FilesUploadComponent_p_fileUpload_0_ng_template_1_Template, 2, 3, \"ng-template\", 2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"multiple\", true)(\"maxFileSize\", 100000);\n  }\n}\n\nexport class FilesUploadComponent {\n  constructor(storeService) {\n    this.storeService = storeService;\n    this.onAddFiles = new EventEmitter();\n    this.onRemoveFileData = new EventEmitter();\n  }\n\n  set files(files) {\n    this.storeService.files = files;\n  }\n\n  ngOnInit() {\n    this.files$ = this.storeService.files$;\n  }\n\n  handleOnSelect(event) {\n    const files = Array.from(event.files).filter(file => event.currentFiles.includes(file));\n    this.storeService.addFiles(files, 0);\n    this.onAddFiles.emit({\n      data: files,\n      transformFileCallback: (oldFile, newFile) => this.transformFile(oldFile, newFile)\n    });\n  }\n\n  handleOnRemoveFileData(event) {\n    this.onRemoveFileData.emit(event);\n  }\n\n  transformFile(oldFile, newFile) {\n    const index = this.storeService.files.findIndex(file => file === oldFile);\n    this.storeService.removeFile(index);\n    this.storeService.addFile(newFile, index);\n  }\n\n}\n\nFilesUploadComponent.ɵfac = function FilesUploadComponent_Factory(t) {\n  return new (t || FilesUploadComponent)(i0.ɵɵdirectiveInject(i1.StoreService));\n};\n\nFilesUploadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FilesUploadComponent,\n  selectors: [[\"app-files-upload\"]],\n  inputs: {\n    files: \"files\"\n  },\n  outputs: {\n    onAddFiles: \"onAddFiles\",\n    onRemoveFileData: \"onRemoveFileData\"\n  },\n  decls: 2,\n  vars: 3,\n  consts: [[3, \"multiple\", \"maxFileSize\", \"onSelect\", 4, \"ngIf\"], [3, \"multiple\", \"maxFileSize\", \"onSelect\"], [\"pTemplate\", \"content\"], [3, \"files\", \"onRemoveFileData\", 4, \"ngIf\"], [3, \"files\", \"onRemoveFileData\"]],\n  template: function FilesUploadComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, FilesUploadComponent_p_fileUpload_0_Template, 2, 2, \"p-fileUpload\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.files$));\n    }\n  },\n  directives: [i2.FilesUploadContentComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmaWxlcy11cGxvYWQuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["/app/src/app/shared/files-upload/components/files-upload/files-upload.component.ts"],"names":["EventEmitter","i0","i1","i2","FilesUploadComponent_p_fileUpload_0_ng_template_1_app_files_upload_content_0_Template","rf","ctx","_r6","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","FilesUploadComponent_p_fileUpload_0_ng_template_1_app_files_upload_content_0_Template_app_files_upload_content_onRemoveFileData_0_listener","$event","ɵɵrestoreView","ctx_r5","ɵɵnextContext","handleOnRemoveFileData","ɵɵelementEnd","files_r4","ngIf","ɵɵproperty","FilesUploadComponent_p_fileUpload_0_ng_template_1_Template","ɵɵtemplate","ɵɵpipe","ctx_r2","ɵɵpipeBind1","files$","FilesUploadComponent_p_fileUpload_0_Template","_r8","FilesUploadComponent_p_fileUpload_0_Template_p_fileUpload_onSelect_0_listener","ctx_r7","handleOnSelect","FilesUploadComponent","constructor","storeService","onAddFiles","onRemoveFileData","files","ngOnInit","event","Array","from","filter","file","currentFiles","includes","addFiles","emit","data","transformFileCallback","oldFile","newFile","transformFile","index","findIndex","removeFile","addFile","ɵfac","FilesUploadComponent_Factory","t","ɵɵdirectiveInject","StoreService","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","outputs","decls","vars","consts","template","FilesUploadComponent_Template","directives","FilesUploadContentComponent","styles"],"mappings":"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","sourcesContent":["import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/store.service\";\nimport * as i2 from \"../files-upload-content/files-upload-content.component\";\nfunction FilesUploadComponent_p_fileUpload_0_ng_template_1_app_files_upload_content_0_Template(rf, ctx) { if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-files-upload-content\", 4);\n    i0.ɵɵlistener(\"onRemoveFileData\", function FilesUploadComponent_p_fileUpload_0_ng_template_1_app_files_upload_content_0_Template_app_files_upload_content_onRemoveFileData_0_listener($event) { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(3); return ctx_r5.handleOnRemoveFileData($event); });\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const files_r4 = ctx.ngIf;\n    i0.ɵɵproperty(\"files\", files_r4);\n} }\nfunction FilesUploadComponent_p_fileUpload_0_ng_template_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵtemplate(0, FilesUploadComponent_p_fileUpload_0_ng_template_1_app_files_upload_content_0_Template, 1, 1, \"app-files-upload-content\", 3);\n    i0.ɵɵpipe(1, \"async\");\n} if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx_r2.files$));\n} }\nfunction FilesUploadComponent_p_fileUpload_0_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p-fileUpload\", 1);\n    i0.ɵɵlistener(\"onSelect\", function FilesUploadComponent_p_fileUpload_0_Template_p_fileUpload_onSelect_0_listener($event) { i0.ɵɵrestoreView(_r8); const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.handleOnSelect($event); });\n    i0.ɵɵtemplate(1, FilesUploadComponent_p_fileUpload_0_ng_template_1_Template, 2, 3, \"ng-template\", 2);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    i0.ɵɵproperty(\"multiple\", true)(\"maxFileSize\", 100000);\n} }\nexport class FilesUploadComponent {\n    constructor(storeService) {\n        this.storeService = storeService;\n        this.onAddFiles = new EventEmitter();\n        this.onRemoveFileData = new EventEmitter();\n    }\n    set files(files) {\n        this.storeService.files = files;\n    }\n    ngOnInit() {\n        this.files$ = this.storeService.files$;\n    }\n    handleOnSelect(event) {\n        const files = Array.from(event.files).filter((file) => event.currentFiles.includes(file));\n        this.storeService.addFiles(files, 0);\n        this.onAddFiles.emit({\n            data: files,\n            transformFileCallback: (oldFile, newFile) => this.transformFile(oldFile, newFile),\n        });\n    }\n    handleOnRemoveFileData(event) {\n        this.onRemoveFileData.emit(event);\n    }\n    transformFile(oldFile, newFile) {\n        const index = this.storeService.files.findIndex((file) => file === oldFile);\n        this.storeService.removeFile(index);\n        this.storeService.addFile(newFile, index);\n    }\n}\nFilesUploadComponent.ɵfac = function FilesUploadComponent_Factory(t) { return new (t || FilesUploadComponent)(i0.ɵɵdirectiveInject(i1.StoreService)); };\nFilesUploadComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: FilesUploadComponent, selectors: [[\"app-files-upload\"]], inputs: { files: \"files\" }, outputs: { onAddFiles: \"onAddFiles\", onRemoveFileData: \"onRemoveFileData\" }, decls: 2, vars: 3, consts: [[3, \"multiple\", \"maxFileSize\", \"onSelect\", 4, \"ngIf\"], [3, \"multiple\", \"maxFileSize\", \"onSelect\"], [\"pTemplate\", \"content\"], [3, \"files\", \"onRemoveFileData\", 4, \"ngIf\"], [3, \"files\", \"onRemoveFileData\"]], template: function FilesUploadComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵtemplate(0, FilesUploadComponent_p_fileUpload_0_Template, 2, 2, \"p-fileUpload\", 0);\n        i0.ɵɵpipe(1, \"async\");\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.files$));\n    } }, directives: [i2.FilesUploadContentComponent], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmaWxlcy11cGxvYWQuY29tcG9uZW50LnNjc3MifQ== */\"] });\n"]},"metadata":{},"sourceType":"module"}